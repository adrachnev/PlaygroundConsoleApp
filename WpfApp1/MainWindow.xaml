<Window x:Class="WpfApp1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfApp1"
        mc:Ignorable="d"
        xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:dictionaries="clr-namespace:Festo.Tool.UI.WPF.Dictionaries;assembly=Festo.Tool.UI.WPF"
        xmlns:dd="clr-namespace:GongSolutions.Wpf.DragDrop;assembly=GongSolutions.Wpf.DragDrop"
        Title="MainWindow" Height="800" Width="800">


    <Window.DataContext>
        <local:TestDataContext />
    </Window.DataContext>
    <Window.Resources>
        <ResourceDictionary>


            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Dictionary1.xaml" />
                <ResourceDictionary
                    Source="pack://application:,,,/Festo.Theme;component/button.xaml" />
            </ResourceDictionary.MergedDictionaries>




            <Style x:Key="DisabledButtonStyle" TargetType="{x:Type RepeatButton}" BasedOn="{StaticResource Festo.ButtonBaseStyle}">
                <Setter Property="ToolTipService.ShowOnDisabled" Value="True" />
                <Setter Property="ToolTip" Value="ToolTip" />
                <Style.Triggers>
                    <Trigger Property="ToolTip" Value="">
                        <Setter Property="ToolTipService.IsEnabled" Value="False" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </Window.Resources>
    <TabControl>
        <TabItem Header="Tab 1">
            <StackPanel>


                <local:Terminal HorizontalContentAlignment="Stretch"
                                Modules="{Binding Devices, Mode=TwoWay}"
                                SelectedModule="{Binding SelectedDevice, Mode=TwoWay}"

                                DoubleClickCommand="{Binding DoubleClickDevice, Mode=TwoWay}" />

                <local:TerminalGrid x:Name="grid" Modules="{Binding Devices, Mode=TwoWay}"
                                    ModuleNameEditEndingCommand="{Binding ModuleNameEditEndingCommand}"
                                    SelectedModule="{Binding SelectedDevice, Mode=TwoWay}"
                                    IsDisplaySlotNumber="True"
                                    DoubleClickCommand="{Binding DoubleClickDevice, Mode=TwoWay}" />

                <CheckBox Content="Display slot number"
                          IsChecked="{Binding ElementName=grid, Path=IsDisplaySlotNumber, Mode=TwoWay}"
                          Command="{Binding GenerateAddressesCommand}"
                          CommandParameter="{Binding Path=IsChecked, RelativeSource={RelativeSource Self}}" />

                <Button Content="Add device" Command="{Binding AddDevice}" Height="25" Width="100"
                        HorizontalAlignment="Right" />
                <Button Content="Async exception test" Command="{Binding ThrowException}" Height="32" Width="100"
                        HorizontalAlignment="Right" />
                <Button Content="Set signal" Command="{Binding SignalDevice}" Height="25" Width="100"
                        HorizontalAlignment="Right" />


                <!--styling module catalogue items-->


                <ListView x:Name="listViewCatalogItems" Background="Azure"
                          ItemsSource="{Binding CatalogItems}"

                          SelectionMode="Single"
                          SelectedItem="{Binding SelectedCatalogueItem}"

                          dd:DragDrop.IsDragSource="True"

                          dd:DragDrop.DragAdornerTemplate="{DynamicResource ItemDragAdorner}">


                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition />
                                </Grid.RowDefinitions>

                                <TextBlock FontWeight="Bold"
                                           Grid.Row="0"
                                           Grid.Column="0"
                                           Text="{Binding OrderCode}"

                                           TextTrimming="CharacterEllipsis" TextWrapping="NoWrap"
                                           ToolTip="{Binding Tooltip}" />


                                <TextBlock TextAlignment="Right"
                                           HorizontalAlignment="Right"
                                           Grid.Row="0"
                                           Grid.Column="1"
                                           VerticalAlignment="Top"
                                           Text="8129111"
                                           TextTrimming="None" TextWrapping="NoWrap"
                                           Margin="0,0,8,0" />
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>


                </ListView>


            </StackPanel>
        </TabItem>
        <TabItem Header="Tab 2">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <RepeatButton Content="Push" Name="JogLeftButton" Click="JogLeftButton_OnClick" Style="{StaticResource DisabledButtonStyle}">
                    <b:Interaction.Triggers>
                        <b:EventTrigger EventName="PreviewMouseLeftButtonUp">
                            <b:InvokeCommandAction CommandParameter="{Binding ElementName=JogLeftButton}"
                                                   Command="{Binding JogStopCommand}" />
                        </b:EventTrigger>
                    </b:Interaction.Triggers>

                </RepeatButton>

            </Grid>
        </TabItem>
    </TabControl>

</Window>